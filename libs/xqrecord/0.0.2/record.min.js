/**
 * author: gitguanqi
 * version: 0.0.2
 * date: 2021-12-2
 * name: record audio and video
 */
function xqRecord(){this.stream=null,this.mediaRecorder=null,this.chunks=[],this.media=null}xqRecord.prototype.createMedia=async function(e,t){try{this.stream=await navigator.mediaDevices.getUserMedia(t),this.media=document.querySelector(e),"video"===e&&(this.media.srcObject=this.stream);let i={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5};this.mediaRecorder=new MediaRecorder(this.stream,i),this.mediaRecorder.ondataavailable=(e=>{this.chunks.push(e.data)}),this.mediaRecorder.start(),this.mediaRecorder.onstop=(()=>{let t=new Blob(this.chunks,{type:this.mediaRecorder.mimeType}),i=window.URL.createObjectURL(t);"video"===e&&(this.media.srcObject=null),this.media.src=i,this.stopSet(e)})}catch(e){console.log("getUserMediaï¼š ",e)}},xqRecord.prototype.start=function(e){let t="audio"==e?{audio:!0}:{video:!0};this.createMedia(e,t)},xqRecord.prototype.stop=function(){this.mediaRecorder.stop()},xqRecord.prototype.stopSet=function(e){"audio"==e?(this.stream.getAudioTracks()[0].stop(),this.stream=null):this.stream.getVideoTracks()[0].stop(),this.stream=null,this.mediaRecorder=null,this.chunks=[],meida=null};